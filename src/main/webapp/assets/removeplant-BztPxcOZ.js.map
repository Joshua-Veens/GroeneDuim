{"version":3,"file":"removeplant-BztPxcOZ.js","sources":["../../../../PlantenInformatie/src/removePlant.js"],"sourcesContent":["import LoginService from './loginService.js';\r\n\r\nlet service = new LoginService();\r\n\r\nfunction refresh() {\r\n    if (service.isLoggedIn()) {\r\n        document.forms.login.style = \"display:none\";\r\n        document.forms.logout.style = \"display:block\";\r\n        service.getUser().then(user => {\r\n            if (user) {\r\n                document.getElementById('user').textContent = user.username;\r\n            }\r\n        });\r\n    } else {\r\n        document.forms.logout.style = \"display:none\";\r\n        document.forms.login.style = \"display:block\";\r\n    }\r\n}\r\n\r\ndocument.forms.login.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n    service.login(document.forms.login.username.value, document.forms.login.password.value).then(() => {\r\n        window.location.reload();\r\n    }).catch(error => {\r\n        alert(error);\r\n    });\r\n});\r\n\r\ndocument.forms.logout.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n    service.logout().then(() => {\r\n        window.location.reload();\r\n    });\r\n});\r\n\r\ndocument.getElementById(\"search-plant-button\").addEventListener(\"click\", function() {\r\n    const plantId = document.getElementById(\"search-id\").value;\r\n    \r\n    fetch(`/api/plants/${plantId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            \"Authorization\": \"Bearer \" + window.localStorage.getItem(\"token\")\r\n        }\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        const plantInfo = `\r\n          <h1>Planteninformatie</h1>\r\n          <p><strong>Wetenschappelijke naam:</strong> ${data.scientific_name}</p>\r\n          <p><strong>Beschrijving:</strong> ${data.description}</p>\r\n          <ul>\r\n            <li><strong>Bloeitijd:</strong> ${data.bloom_time}</li>\r\n            <li><strong>Hoogte:</strong> ${data.height}</li>\r\n            <li><strong>Breedte:</strong> ${data.width}</li>\r\n            <li><strong>Zonvereisten:</strong> ${data.sun_requirements}</li>\r\n            <li><strong>Bodemtype:</strong> ${data.soil_type}</li>\r\n            <li><strong>Waterbehoefte:</strong> ${data.water_needs}</li>\r\n          </ul>\r\n        `;\r\n        document.getElementById(\"plant-info\").innerHTML = plantInfo;\r\n        document.getElementById(\"plant-info\").style.display = \"block\";\r\n        document.getElementById(\"remove-plant-button\").style.display = \"block\";\r\n    })\r\n    .catch(error => {\r\n        console.error(\"Error fetching plant:\", error);\r\n        alert(\"Plant not found\");\r\n    });\r\n});\r\n\r\ndocument.getElementById(\"remove-plant-button\").addEventListener(\"click\", function() {\r\n    const plantId = document.getElementById(\"search-id\").value;\r\n\r\n    fetch(`/api/plants/${plantId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            \"Authorization\": \"Bearer \" + window.localStorage.getItem(\"token\")\r\n        },\r\n    })\r\n    .then(response => {\r\n        if (response.status === 200) {\r\n            return response.json();\r\n        } else {\r\n            throw new Error(\"Failed to remove plant. Status: \" + response.status);\r\n        }\r\n    })\r\n    .then(data => {\r\n        console.log(\"Plant removed successfully:\", data); // Log to check data received\r\n        alert(\"Plant removed successfully\");\r\n        document.getElementById(\"plant-info\").reset();\r\n        document.getElementById(\"plant-info\").style.display = \"none\";\r\n        document.getElementById(\"remove-plant-button\").style.display = \"none\";\r\n    })\r\n    .catch(error => {\r\n        console.error(\"Error removing plant:\", error);\r\n        alert(error.message);\r\n    });\r\n});\r\n\r\n\r\nrefresh();\r\n\r\nservice.getUser().then(user => {\r\n    if (!user) {\r\n        service.logout();\r\n    }\r\n    refresh();\r\n});\r\n"],"names":["service","LoginService","refresh","user","e","error","plantId","response","data","plantInfo"],"mappings":"2EAEA,IAAIA,EAAU,IAAIC,EAElB,SAASC,GAAU,CACXF,EAAQ,cACR,SAAS,MAAM,MAAM,MAAQ,eAC7B,SAAS,MAAM,OAAO,MAAQ,gBAC9BA,EAAQ,QAAO,EAAG,KAAKG,GAAQ,CACvBA,IACA,SAAS,eAAe,MAAM,EAAE,YAAcA,EAAK,SAEnE,CAAS,IAED,SAAS,MAAM,OAAO,MAAQ,eAC9B,SAAS,MAAM,MAAM,MAAQ,gBAErC,CAEA,SAAS,MAAM,MAAM,iBAAiB,SAAUC,GAAK,CACjDA,EAAE,eAAc,EAChBJ,EAAQ,MAAM,SAAS,MAAM,MAAM,SAAS,MAAO,SAAS,MAAM,MAAM,SAAS,KAAK,EAAE,KAAK,IAAM,CAC/F,OAAO,SAAS,QACxB,CAAK,EAAE,MAAMK,GAAS,CACd,MAAMA,CAAK,CACnB,CAAK,CACL,CAAC,EAED,SAAS,MAAM,OAAO,iBAAiB,SAAUD,GAAK,CAClDA,EAAE,eAAc,EAChBJ,EAAQ,SAAS,KAAK,IAAM,CACxB,OAAO,SAAS,QACxB,CAAK,CACL,CAAC,EAED,SAAS,eAAe,qBAAqB,EAAE,iBAAiB,QAAS,UAAW,CAChF,MAAMM,EAAU,SAAS,eAAe,WAAW,EAAE,MAErD,MAAM,eAAeA,CAAO,GAAI,CAC5B,OAAQ,MACR,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAY,OAAO,aAAa,QAAQ,OAAO,CACnE,CACT,CAAK,EACA,KAAKC,GAAYA,EAAS,MAAM,EAChC,KAAKC,GAAQ,CACV,MAAMC,EAAY;AAAA;AAAA,wDAE8BD,EAAK,eAAe;AAAA,8CAC9BA,EAAK,WAAW;AAAA;AAAA,8CAEhBA,EAAK,UAAU;AAAA,2CAClBA,EAAK,MAAM;AAAA,4CACVA,EAAK,KAAK;AAAA,iDACLA,EAAK,gBAAgB;AAAA,8CACxBA,EAAK,SAAS;AAAA,kDACVA,EAAK,WAAW;AAAA;AAAA,UAG1D,SAAS,eAAe,YAAY,EAAE,UAAYC,EAClD,SAAS,eAAe,YAAY,EAAE,MAAM,QAAU,QACtD,SAAS,eAAe,qBAAqB,EAAE,MAAM,QAAU,OACvE,CAAK,EACA,MAAMJ,GAAS,CACZ,QAAQ,MAAM,wBAAyBA,CAAK,EAC5C,MAAM,iBAAiB,CAC/B,CAAK,CACL,CAAC,EAED,SAAS,eAAe,qBAAqB,EAAE,iBAAiB,QAAS,UAAW,CAChF,MAAMC,EAAU,SAAS,eAAe,WAAW,EAAE,MAErD,MAAM,eAAeA,CAAO,GAAI,CAC5B,OAAQ,SACR,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAY,OAAO,aAAa,QAAQ,OAAO,CACnE,CACT,CAAK,EACA,KAAKC,GAAY,CACd,GAAIA,EAAS,SAAW,IACpB,OAAOA,EAAS,OAEhB,MAAM,IAAI,MAAM,mCAAqCA,EAAS,MAAM,CAEhF,CAAK,EACA,KAAKC,GAAQ,CACV,QAAQ,IAAI,8BAA+BA,CAAI,EAC/C,MAAM,4BAA4B,EAClC,SAAS,eAAe,YAAY,EAAE,MAAK,EAC3C,SAAS,eAAe,YAAY,EAAE,MAAM,QAAU,OACtD,SAAS,eAAe,qBAAqB,EAAE,MAAM,QAAU,MACvE,CAAK,EACA,MAAMH,GAAS,CACZ,QAAQ,MAAM,wBAAyBA,CAAK,EAC5C,MAAMA,EAAM,OAAO,CAC3B,CAAK,CACL,CAAC,EAGDH,IAEAF,EAAQ,QAAO,EAAG,KAAKG,GAAQ,CACtBA,GACDH,EAAQ,OAAM,EAElBE,GACJ,CAAC"}