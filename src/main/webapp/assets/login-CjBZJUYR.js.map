{"version":3,"file":"login-CjBZJUYR.js","sources":["../../../../frontend/src/login.js"],"sourcesContent":["import LoginService from './loginService.js';\r\n\r\nlet service = new LoginService();\r\n\r\nfunction refresh() {\r\n    const plantActions = document.getElementById('plant-actions');\r\n\r\n    if (service.isLoggedIn()) {\r\n        document.forms.login.style = \"display:none\";\r\n        document.forms.logout.style = \"display:block\";\r\n        plantActions.style = \"display:block\";\r\n        \r\n        service.getUser().then(user => {\r\n            if (user) {\r\n                document.getElementById('user').textContent = user.username;\r\n            }\r\n        });\r\n    } else {\r\n        document.forms.logout.style = \"display:none\";\r\n        document.forms.login.style = \"display:block\";\r\n        plantActions.style = \"display:none\";\r\n    }\r\n}\r\n\r\ndocument.forms.login.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n    service.login(document.forms.login.username.value, document.forms.login.password.value).then(() => {\r\n        window.location.reload();\r\n    }).catch(error => {\r\n        alert(error);\r\n    });\r\n});\r\n\r\ndocument.forms.logout.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n    service.logout().then(() => {\r\n        window.location.reload();\r\n    });\r\n});\r\n\r\nrefresh();\r\n\r\nservice.getUser().then(user => {\r\n    if (!user) {\r\n        service.logout();\r\n    }\r\n    refresh();\r\n});\r\n"],"names":["service","LoginService","refresh","plantActions","user","error"],"mappings":"2EAEA,IAAIA,EAAU,IAAIC,EAElB,SAASC,GAAU,CACf,MAAMC,EAAe,SAAS,eAAe,eAAe,EAExDH,EAAQ,cACR,SAAS,MAAM,MAAM,MAAQ,eAC7B,SAAS,MAAM,OAAO,MAAQ,gBAC9BG,EAAa,MAAQ,gBAErBH,EAAQ,QAAO,EAAG,KAAKI,GAAQ,CACvBA,IACA,SAAS,eAAe,MAAM,EAAE,YAAcA,EAAK,SAEnE,CAAS,IAED,SAAS,MAAM,OAAO,MAAQ,eAC9B,SAAS,MAAM,MAAM,MAAQ,gBAC7BD,EAAa,MAAQ,eAE7B,CAEA,SAAS,MAAM,MAAM,iBAAiB,SAAU,GAAK,CACjD,EAAE,eAAc,EAChBH,EAAQ,MAAM,SAAS,MAAM,MAAM,SAAS,MAAO,SAAS,MAAM,MAAM,SAAS,KAAK,EAAE,KAAK,IAAM,CAC/F,OAAO,SAAS,QACxB,CAAK,EAAE,MAAMK,GAAS,CACd,MAAMA,CAAK,CACnB,CAAK,CACL,CAAC,EAED,SAAS,MAAM,OAAO,iBAAiB,SAAU,GAAK,CAClD,EAAE,eAAc,EAChBL,EAAQ,SAAS,KAAK,IAAM,CACxB,OAAO,SAAS,QACxB,CAAK,CACL,CAAC,EAEDE,IAEAF,EAAQ,QAAO,EAAG,KAAKI,GAAQ,CACtBA,GACDJ,EAAQ,OAAM,EAElBE,GACJ,CAAC"}