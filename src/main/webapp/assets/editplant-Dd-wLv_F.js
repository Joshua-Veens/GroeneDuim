import"./style-DHhJK1-u.js";import{L as d}from"./loginService-C4Qp4EcO.js";let o=new d;function l(){o.isLoggedIn()?(document.forms.login.style="display:none",document.forms.logout.style="display:block",o.getUser().then(t=>{t&&(document.getElementById("user").textContent=t.username)})):(document.forms.logout.style="display:none",document.forms.login.style="display:block")}document.forms.login.addEventListener("submit",t=>{t.preventDefault(),o.login(document.forms.login.username.value,document.forms.login.password.value).then(()=>{window.location.reload()}).catch(e=>{alert(e)})});document.forms.logout.addEventListener("submit",t=>{t.preventDefault(),o.logout().then(()=>{window.location.reload()})});document.getElementById("search-plant-button").addEventListener("click",function(){const t=document.getElementById("search-id").value;fetch(`/api/plants/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")}}).then(e=>e.json()).then(e=>{document.getElementById("id").value=e.id,document.getElementById("scientific_name").value=e.scientific_name,document.getElementById("description").value=e.description,document.getElementById("bloom_time").value=e.bloom_time,document.getElementById("height").value=e.height,document.getElementById("width").value=e.width,document.getElementById("sun_requirements").value=e.sun_requirements,document.getElementById("soil_type").value=e.soil_type,document.getElementById("water_needs").value=e.water_needs,document.getElementById("edit-plant-form").style.display="block"}).catch(e=>{console.error("Error fetching plant:",e),alert("Plant not found")})});document.getElementById("edit-plant-form").addEventListener("submit",function(t){t.preventDefault();const e={id:document.getElementById("id").value,scientific_name:document.getElementById("scientific_name").value,description:document.getElementById("description").value,bloom_time:document.getElementById("bloom_time").value,height:document.getElementById("height").value,width:document.getElementById("width").value,sun_requirements:document.getElementById("sun_requirements").value,soil_type:document.getElementById("soil_type").value,water_needs:document.getElementById("water_needs").value};fetch(`/api/plants/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")},body:JSON.stringify(e)}).then(n=>{if(n.status===200)return n.json();throw new Error("Failed to update plant.")}).then(n=>{alert("Plant updated successfully"),document.getElementById("edit-plant-form").reset(),document.getElementById("edit-plant-form").style.display="none"}).catch(n=>{console.error("Error updating plant:",n),alert(n.message)})});l();o.getUser().then(t=>{t||o.logout(),l()});
//# sourceMappingURL=editplant-Dd-wLv_F.js.map
