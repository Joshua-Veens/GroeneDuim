{"version":3,"file":"loginService-C4Qp4EcO.js","sources":["../../../../frontend/src/loginService.js"],"sourcesContent":["export default class LoginService {\r\n    isLoggedIn() {\r\n        return window.localStorage.getItem('token') !== null;\r\n    }\r\n\r\n    async login(user, password) {\r\n        const response = await fetch('/api/authentication/login', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ username: user, password: password })\r\n        });\r\n\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            window.localStorage.setItem('token', data.JWT);\r\n            return Promise.resolve();\r\n        } else {\r\n            const errorData = await response.json();\r\n            return Promise.reject(errorData.error || 'Login failed');\r\n        }\r\n    }\r\n\r\n    async getUser() {\r\n        const token = window.localStorage.getItem('token');\r\n        if (!token) return Promise.resolve(null);\r\n\r\n        const response = await fetch('/api/authentication/validate', {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        });\r\n\r\n        if (response.ok) {\r\n            return response.json();\r\n        } else {\r\n            this.logout();\r\n            return Promise.resolve(null);\r\n        }\r\n    }\r\n\r\n    logout() {\r\n        window.localStorage.removeItem('token');\r\n        return Promise.resolve();\r\n    }\r\n}"],"names":["LoginService","user","password","response","data","errorData","token"],"mappings":"AAAe,MAAMA,CAAa,CAC9B,YAAa,CACT,OAAO,OAAO,aAAa,QAAQ,OAAO,IAAM,IACnD,CAED,MAAM,MAAMC,EAAMC,EAAU,CACxB,MAAMC,EAAW,MAAM,MAAM,4BAA6B,CACtD,OAAQ,OACR,QAAS,CACL,eAAgB,kBACnB,EACD,KAAM,KAAK,UAAU,CAAE,SAAUF,EAAM,SAAUC,EAAU,CACvE,CAAS,EAED,GAAIC,EAAS,GAAI,CACb,MAAMC,EAAO,MAAMD,EAAS,OAC5B,cAAO,aAAa,QAAQ,QAASC,EAAK,GAAG,EACtC,QAAQ,SAC3B,KAAe,CACH,MAAMC,EAAY,MAAMF,EAAS,OACjC,OAAO,QAAQ,OAAOE,EAAU,OAAS,cAAc,CAC1D,CACJ,CAED,MAAM,SAAU,CACZ,MAAMC,EAAQ,OAAO,aAAa,QAAQ,OAAO,EACjD,GAAI,CAACA,EAAO,OAAO,QAAQ,QAAQ,IAAI,EAEvC,MAAMH,EAAW,MAAM,MAAM,+BAAgC,CACzD,OAAQ,MACR,QAAS,CACL,cAAiB,UAAUG,CAAK,EACnC,CACb,CAAS,EAED,OAAIH,EAAS,GACFA,EAAS,QAEhB,KAAK,OAAM,EACJ,QAAQ,QAAQ,IAAI,EAElC,CAED,QAAS,CACL,cAAO,aAAa,WAAW,OAAO,EAC/B,QAAQ,SAClB,CACL"}