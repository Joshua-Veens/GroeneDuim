import"./style-Htvu6hAP.js";import{L as a}from"./loginService-C4Qp4EcO.js";let n=new a;function d(){n.isLoggedIn()?(document.forms.login.style="display:none",document.forms.logout.style="display:block",n.getUser().then(e=>{e&&(document.getElementById("user").textContent=e.username)})):(document.forms.logout.style="display:none",document.forms.login.style="display:block")}document.forms.login.addEventListener("submit",e=>{e.preventDefault(),n.login(document.forms.login.username.value,document.forms.login.password.value).then(()=>{window.location.reload()}).catch(o=>{alert(o)})});document.forms.logout.addEventListener("submit",e=>{e.preventDefault(),n.logout().then(()=>{window.location.reload()})});document.getElementById("add-plant-form").addEventListener("submit",function(e){e.preventDefault();const o={id:document.getElementById("id").value,scientific_name:document.getElementById("scientific_name").value,description:document.getElementById("description").value,bloom_time:document.getElementById("bloom_time").value,height:document.getElementById("height").value,width:document.getElementById("width").value,sun_requirements:document.getElementById("sun_requirements").value,soil_type:document.getElementById("soil_type").value,water_needs:document.getElementById("water_needs").value};fetch("/api/plants",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("token")},body:JSON.stringify(o)}).then(t=>{if(t.status===201)return t.json();if(t.status===409)return t.text().then(l=>{throw new Error(l)});if(t.status===403)return new Error("You are not authorized to add a plant.");throw new Error("Failed to add plant.")}).then(t=>{alert("Plant added!"),document.getElementById("add-plant-form").reset()}).catch(t=>{console.error("Error adding plant:",t),alert(t.message)})});d();n.getUser().then(e=>{e||n.logout(),d()});
//# sourceMappingURL=addplant-BTbYgSwq.js.map
